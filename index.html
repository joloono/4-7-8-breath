<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4-7-8 Atem√ºbung</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: #f0f8ff;
            font-family: Arial, sans-serif;
        }

        .container {
            position: relative;
            text-align: center;
        }

        .circle {
            position: relative;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            animation: sizeAndColor 19s infinite;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .countdown {
            font-size: 1rem;
            font-weight: bold;
            color: #333;
            opacity: 0.1;
            transition: opacity 0.5s ease;
        }

        .text {
            position: absolute;
            top: calc(100% + 20px); /* unterhalb des Kreises platzieren */
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        @keyframes sizeAndColor {
            /* Zeitablauf total: 19s 
               Einatmen: 0s - 4s (0% - 21%)
               Halten: 4s - 11s (22% - 57%)
               Ausatmen: 11s - 19s (58% - 100%) */
            0% {
                transform: scale(0.2);
                background-color: #FF8C00;
            }
            21% {
                transform: scale(7);
                background-color: #32CD32;
            }
            57% {
                transform: scale(8);
                background-color: #FFD700;
            }
            100% {
                transform: scale(0.2);
                background-color: #FF8C00;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="circle">
            <div class="countdown" id="countdownText">4</div>
        </div>
        <div class="text" id="displayText">Einatmen...</div>
    </div>

    <script>
        // Zeitabschnitte des Zyklus (in ms)
        const totalDuration = 19000; 
        const inhaleTime = 4000;   // 4s
        const holdTime = 7000;     // 7s
        const exhaleTime = 8000;   // 8s

        // Elemente
        const textElement = document.getElementById('displayText');
        const countdownElement = document.getElementById('countdownText');

        // Countdown-Arrays
        const inhaleCountdown = [4, 3, 2, 1];
        const holdCountdown = [7, 6, 5, 4, 3, 2, 1];
        const exhaleCountdown = [8, 7, 6, 5, 4, 3, 2, 1];

        function fadeText(element, newText) {
            // Text mit Fade austauschen
            element.style.opacity = '0';
            setTimeout(() => {
                element.textContent = newText;
                element.style.opacity = '1';
            }, 500);
        }

        function runCountdown(sequence, phaseDuration) {
            // sequence: Array mit den Sekunden
            // phaseDuration: Dauer der Phase in ms
            // Alle 1000ms einen Wert ausgeben
            let index = 0;
            fadeText(countdownElement, sequence[index]);

            const interval = setInterval(() => {
                index++;
                if (index < sequence.length) {
                    fadeText(countdownElement, sequence[index]);
                } else {
                    clearInterval(interval);
                }
            }, 1000);
        }

        function startCycle() {
            // Phase 1: Einatmen
            fadeText(textElement, "Einatmen...");
            runCountdown(inhaleCountdown, inhaleTime);

            setTimeout(() => {
                // Phase 2: Halten
                fadeText(textElement, "Halten...");
                runCountdown(holdCountdown, holdTime);
            }, inhaleTime);

            setTimeout(() => {
                // Phase 3: Ausatmen
                fadeText(textElement, "Ausatmen...");
                runCountdown(exhaleCountdown, exhaleTime);
            }, inhaleTime + holdTime);

            setTimeout(() => {
                // Nach 19s den Zyklus erneut starten
                startCycle();
            }, totalDuration);
        }

        startCycle();
    </script>
</body>
</html>